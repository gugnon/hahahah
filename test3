getgenv().Vanity = {
    ["Main"] = {
        ["Key"] = "Poptart",
    },
}

local function checkKey(key)
    local pastebinUrl = "https://pastebin.com/raw/22QEtmZ8"
    local success, response = pcall(syn.request, {
        Url = pastebinUrl,
        Method = "GET"
    })
    
    if success and response.Success then
        local content = response.Body
        if string.find(content, key) then
            return true
        else
            return false
        end
    else
        return false
    end
end

local keyExists = checkKey(getgenv().Vanity.Main.Key)

if keyExists then
    local scriptUrl = "https://raw.githubusercontent.com/Leavinbodys/Vanity-Comps/main/vanity%20unwl.lua"
    local success, scriptContent = pcall(game.HttpGet, game, scriptUrl)
    
    if success then
        loadstring(scriptContent)()
    else
        game.Players.LocalPlayer:Kick("Failed to load the script.")
    end
else
    game.Players.LocalPlayer:Kick("You are not whitelisted")
end
